<UserControl x:Class="CafePos.Presentation.Views.MainPosView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="340" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Grid.ColumnSpan="2" Background="#FFF8F5" Padding="12" CornerRadius="12">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="CafePOS" FontSize="24" FontWeight="Bold" />
                <TextBlock Text=" | Touch POS" Margin="12,0,0,0" />
            </StackPanel>
        </Border>

        <Border Grid.Row="1" Grid.Column="0" Background="White" CornerRadius="12" Padding="12" Margin="0,12,12,12">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <ListView Grid.Row="0" ItemsSource="{Binding CartLines}" SelectedItem="{Binding SelectedCartLine}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Item" Width="170" DisplayMemberBinding="{Binding Description}" />
                            <GridViewColumn Header="Qty" Width="50" DisplayMemberBinding="{Binding Qty}" />
                            <GridViewColumn Header="Total" Width="80" DisplayMemberBinding="{Binding LineTotal}" />
                        </GridView>
                    </ListView.View>
                </ListView>

                <StackPanel Grid.Row="1" Margin="0,8,0,0">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button Content="+" Width="60" Command="{Binding IncreaseQtyCommand}" />
                        <Button Content="-" Width="60" Command="{Binding DecreaseQtyCommand}" />
                        <Button Content="Remove" Width="100" Command="{Binding RemoveLineCommand}" />
                    </StackPanel>
                    <TextBlock Text="Subtotal" />
                    <TextBlock Text="{Binding Subtotal, StringFormat=C}" FontWeight="Bold" />
                    <TextBlock Text="Tax" Margin="0,6,0,0" />
                    <TextBlock Text="{Binding TaxTotal, StringFormat=C}" FontWeight="Bold" />
                    <TextBlock Text="Total" Margin="0,6,0,0" />
                    <TextBlock Text="{Binding Total, StringFormat=C}" FontWeight="Bold" FontSize="22" />
                </StackPanel>
            </Grid>
        </Border>

        <Grid Grid.Row="1" Grid.Column="1" Margin="0,12,0,12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <ListBox Grid.Row="0" ItemsSource="{Binding Categories}" SelectedItem="{Binding SelectedCategory}"
                     Height="70" ScrollViewer.HorizontalScrollBarVisibility="Auto">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border Background="#F0EFEA" CornerRadius="10" Padding="12" Margin="4">
                            <TextBlock Text="{Binding Name}" FontWeight="SemiBold" />
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

            <ScrollViewer Grid.Row="1">
                <ItemsControl ItemsSource="{Binding VisibleItems}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Button Content="{Binding DisplayName}" Command="{Binding DataContext.AddItemCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                    CommandParameter="{Binding}" Width="200" Height="90" Margin="6" />
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Grid>

        <Border Grid.Row="2" Grid.ColumnSpan="2" Background="#FFF8F5" Padding="12" CornerRadius="12">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Content="New Order" Command="{Binding NewOrderCommand}" Width="150" />
                <Button Content="Hold" Command="{Binding HoldOrderCommand}" Width="120" />
                <Button Content="Recall" Command="{Binding RecallOrderCommand}" Width="120" />
                <Button Content="Pay" Command="{Binding PayCommand}" Width="140" Background="#FFBB5C" />
                <Button Content="Close Shift" Command="{Binding CloseShiftCommand}" Width="160" />
                <Button Content="Reports" Command="{Binding OpenReportsCommand}" Width="140" />
                <Button Content="Menu Setup" Command="{Binding OpenMenuSetupCommand}" Width="160" />
                <Button Content="Settings" Command="{Binding OpenSettingsCommand}" Width="140" />
                <Button Content="Users" Command="{Binding OpenUsersCommand}" Width="120" />
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
